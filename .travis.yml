before_install:
  # init xvfb
  # http://docs.travis-ci.com/user/gui-and-headless-browsers/
  - "export DISPLAY=:99.0 && sh -e /etc/init.d/xvfb start"
branches:
  only:
  - alpha
  - beta
  - master
env:
  global:
  # this value is auto-generated by shAesEncryptTravis
  - secure: FdHgfCdR5maWUjA2+pYn8wxn5Nb+soh+U8TaisU9Ha5wlrStovMk3pJW8CIN4AaqPCHo/3PQKbh2emiq3XdwS+2ry6MMYoGoDZITFsQKLAj1R0YSqgb7NVFhMDJCNYN7yQi3pOjA3ssE2ccn05JX0nPhFtvNSKdfGk5b3uGuUvc= # AES_256_KEY
  # this value is auto-generated by shAesEncryptTravis
  # - AES_ENCRYPTED_SH: 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 # AES_ENCRYPTED_SH
language:
  - node_js
node_js:
  - "0.10"
script:
  # init env
  - export TEST_URL="https://hrku01-utility2-$TRAVIS_BRANCH.herokuapp.com/?modeTest=1"
  - export GITHUB_REPO=kaizhu256/node-utility2
  - export HEROKU_REPO=hrku01-utility2-$TRAVIS_BRANCH
  - ./cli.sh shNpmTestPublished && npm test && ./cli.sh shHerokuDeploy
  - ./cli.sh shBuildExit
